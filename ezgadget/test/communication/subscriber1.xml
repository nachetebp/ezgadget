<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="Listening Map" height="500" /> 
  <UserPref 
    name="lat" 
    default_value="37441900" 
    listen="true" 
    on_change="updateLocation" 
    group="geoinfo" /> 
  <UserPref name="long" 
    default_value="-122141900" 
    listen="true" 
    on_change="updateLocation" 
    group="geoinfo" /> 
 <Content type="html">

 <![CDATA[ 
    <script src="http://maps.google.com/maps?file=api&amp;v=2.x" type="text/javascript"></script>
    <div id="map" style="width:100%;height:100%"></div>

    <script type="text/javascript">
      function updateLocation() {
        var newLat = prefs.getInt("lat") / 1000000;
        var newLong = prefs.getInt("long") / 1000000;
        map.panTo(new GLatLng(newLat, newLong), 13);
      }

      var prefs = new _IG_Prefs(__MODULE_ID__);
      var lat = prefs.getInt("lat") / 1000000;
      var long = prefs.getInt("long") / 1000000;
      var map = new GMap2(_gel("map"));
      map.setCenter(new GLatLng(lat, long), 13);
    </script>

  ]]> 
  </Content>
</Module>